Stream Spigot
=============

[![NPM](https://nodei.co/npm/stream-spigot.png)](https://nodei.co/npm/stream-spigot/)

[![david-dm](https://david-dm.org/brycebaril/node-stream-spigot.png)](https://david-dm.org/brycebaril/node-stream-spigot/)
[![david-dm](https://david-dm.org/brycebaril/node-stream-spigot/dev-status.png)](https://david-dm.org/brycebaril/node-stream-spigot#info=devDependencies/)


A generator for (streams2) Readable streams, useful for testing or converting simple lazy functions into Readable streams, or just creating Readable streams without all the boilerplate.

```javascript
var spigot = require("stream-spigot")

spigot.array(["ABCDEFG"]).pipe(process.stdout)
// ABCDEFG

spigot.array(["ABC", "DEF", "G"]).pipe(process.stdout)
// same as: (short form)
spigot(["ABC", "DEF", "G"]).pipe(process.stdout)
// ABCDEFG


// Create a stream out of a synchronous generator:
var count = 0
function gen() {
  if (count++ < 5) {
    return {val: count}
  }
}

spigot.sync({objectMode: true}, gen).pipe(...)
/*
{val: 1}
{val: 2}
{val: 3}
{val: 4}
{val: 5}
*/


// Create a more traditional Readable stream:
var source = spigot({objectMode: true}, function () {
  var self = this
  iterator.next(function (err, value) {
    if (err) return self.emit("error", err)
    self.push(value)
  })
})

source.pipe(...)

```

Usage
=====

spigot([options,] _read)
---

Create a Readable stream instance with the specified _read method. Your _read method should follow the normal [stream.Readable _read](http://nodejs.org/api/stream.html